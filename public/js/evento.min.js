(()=>{
    const textEventoSearch = document.querySelector("#evento");
    const tableEventoSearch = document.querySelector("#table_evento");
    const buttonEventoSearch = document.querySelector("#btn_evento");
    const routeEventoSearch = document.querySelector('#evento_search');

    const createEventoTable = (tbody) => {
        return `<table class="table">
            <thead>
                <td>#</td>
                <td>nome</td>
                <td>data come√ßo</td>
                <td>data termino</td>
            </thead>
            <tbody>${tbody}</tbody>
        </table>`;
    }

    const buildTable = (data) => {
        let tbody = ``;
        data.forEach((item, index) => { tbody = `<tr>
                <td>
                    <input id="labEvento${index}" class="form-check" name="evento_id" value="${item.id}" type="radio"/></td>
                <td>
                    <label for="labEvento${index}">${item.nome}</label>
                </td>
                <td>
                    <label>${item.data_comeco}</label>
                </td>
                <td>
                    <label>${item.data_termino}</label>
                </td>
            </tr>`;});
        tableEventoSearch.innerHTML = createEventoTable(tbody);
    };

    const ajaxEventoSearch = () => {
        fetch(`${routeEventoSearch.value}?name=${textEventoSearch.value}`)
        .then(resp => resp.json())
        .then(data => buildTable(data))
    }

    buttonEventoSearch.addEventListener('click',(e)=>{
        ajaxEventoSearch();
    });

})();
