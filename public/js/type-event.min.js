(()=>{
    const textSearch = document.querySelector("#tipo_evento");
    const tableSearch = document.querySelector("#table_tipo_evento");
    const buttonSearch = document.querySelector("#btn_tipo_evento");
    const routeSearch = document.querySelector('#tipo_evento_search');

    const crateTable = (tbody) => {
        return `<table class="table">
            <thead>
                <td>#</td>
                <td>nome</td>
            </thead>
            <tbody>${tbody}</tbody>
        </table>`;
    }

    const buildTable = (data) => {
        let tbody = ``;
        data.forEach((item, index) => { tbody = `<tr>
                <td>
                    <input id="lab${index}" class="form-check" name="tipo_evento_id" value="${item.id}" type="radio"/></td>
                <td>
                    <label for="lab${index}">${item.nome}</label>
                </td>
            </tr>`;});
        tableSearch.innerHTML = crateTable(tbody);
    };

    const ajaxSearch = () => {
        fetch(`${routeSearch.value}?name=${textSearch.value}`)
        .then(resp => resp.json())
        .then(data => buildTable(data))
    }

    buttonSearch.addEventListener('click',(e)=>{
        ajaxSearch();
    });

})();
